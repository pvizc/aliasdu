<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Aliases</title>
  </head>

  <body class="w-95 bg-white p-3 font-sans text-slate-900">
    <div class="sticky top-0 z-10 -mx-3 bg-white px-3 pb-3 pt-3">
      <header class="flex items-center justify-between gap-2">
        <div class="flex items-center gap-2">
          <div
            class="grid size-9 place-items-center rounded-xl bg-lime-500 text-white"
            aria-hidden="true"
          >
            <i data-lucide="at-sign" class="size-5 text-white stroke-current"></i>
          </div>
          <div class="leading-tight">
            <div class="text-sm font-semibold">aliasdu</div>
            <div class="text-xs text-slate-500">Migadu · Aliases</div>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <div class="relative">
            <button
              id="domainSelector"
              type="button"
              class="flex h-9 items-center gap-2 rounded-xl border border-slate-200 bg-white px-2 text-xs font-semibold text-slate-700 shadow-sm hover:bg-slate-50 cursor-pointer disabled:cursor-not-allowed disabled:opacity-60"
              aria-label="Select default domain"
              title="Select default alias domain"
            >
              <span id="domainSelectorLabel" class="text-xs text-slate-800 text-nowrap">—</span>
            </button>
            <div
              id="domainMenu"
              class="absolute right-0 z-20 mt-2 hidden w-52 overflow-hidden rounded-xl border border-slate-200 bg-white text-sm shadow-lg"
            ></div>
          </div>
          <button
            id="refresh"
            type="button"
            class="grid place-items-center rounded-xl border border-slate-200 bg-white size-9 text-sm shadow-sm hover:bg-slate-50 cursor-pointer disabled:cursor-not-allowed disabled:opacity-60"
            aria-label="Refresh"
            title="Refresh"
          >
            <i
              data-lucide="refresh-cw"
              aria-hidden="true"
              class="size-4 text-slate-700 stroke-current"
            ></i>
          </button>
          <button
            id="add"
            type="button"
            class="grid place-items-center rounded-xl bg-lime-500 size-9 text-sm font-semibold text-white shadow-sm hover:bg-lime-600 cursor-pointer disabled:cursor-not-allowed disabled:opacity-60"
            aria-label="New alias"
            title="New alias"
          >
            <i
              data-lucide="circle-plus"
              aria-hidden="true"
              class="size-4 text-white stroke-current"
            ></i>
          </button>
        </div>
      </header>

      <div class="mt-3 h-px bg-slate-200/70"></div>
      <div class="mt-3">
        <input
          id="search"
          type="search"
          placeholder="Search..."
          class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-lime-500 disabled:cursor-not-allowed disabled:bg-slate-50"
        />
      </div>
    </div>

    <div class="mt-3 flex items-center justify-between">
      <p id="status" class="text-xs text-slate-500">—</p>
      <span
        class="rounded-full bg-lime-50 px-2 py-0.5 text-[11px] font-medium text-lime-700 text-nowrap"
        >Address Aliases</span
      >
    </div>

    <section id="create" class="mt-3 hidden border-l-2 border-lime-500 bg-slate-50/50 p-3">
      <div class="text-xs font-semibold text-slate-700">New Alias</div>

      <label class="mt-3 block text-[11px] font-medium text-slate-600">Local part</label>
      <input
        id="localPart"
        class="mt-1 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-lime-500"
        placeholder="spotify"
      />

      <label class="mt-3 block text-[11px] font-medium text-slate-600">Destinations (CSV)</label>
      <input
        id="destinations"
        class="mt-1 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-lime-500"
      />

      <label class="mt-3 items-center gap-2 text-xs text-slate-700 hidden">
        <input id="isInternal" type="checkbox" class="size-4 accent-lime-600" />
        Internal
      </label>

      <p class="mt-1 text-[11px] text-slate-500">
        Migadu changes can take a few minutes to propagate after creating or updating an alias.
      </p>

      <div class="mt-3 flex gap-2">
        <button
          id="createBtn"
          type="button"
          class="flex-1 rounded-lg bg-lime-500 px-3 py-2 text-sm font-semibold text-white hover:bg-lime-600"
        >
          Create
        </button>
        <button
          id="cancelBtn"
          type="button"
          class="flex-1 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50"
        >
          Cancel
        </button>
      </div>
    </section>

    <div id="list" class="mt-3"></div>

    <dialog
      id="confirmDeleteDialog"
      class="w-[92%] max-w-sm rounded-2xl border border-slate-200 bg-white p-0 shadow-2xl mt-6 mx-auto"
    >
      <div class="border-b border-slate-200 px-4 py-3">
        <p class="text-sm font-semibold text-slate-900">Delete alias?</p>
        <p class="mt-1 text-xs text-slate-600">This action removes the alias in Migadu.</p>
      </div>

      <div class="px-4 py-3">
        <p class="text-[11px] font-medium text-slate-600">Alias</p>
        <p id="confirmDeleteAlias" class="mt-1 truncate text-sm font-semibold text-slate-900"></p>
      </div>

      <div class="flex items-center justify-end gap-2 border-t border-slate-200 px-4 py-3">
        <button
          id="cancelDeleteBtn"
          type="button"
          class="rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50"
        >
          Cancel
        </button>
        <button
          id="confirmDeleteBtn"
          type="button"
          class="rounded-lg bg-rose-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-rose-600"
        >
          Delete
        </button>
      </div>
    </dialog>

    <script type="module" src="./popup.ts"></script>
  </body>
</html>
